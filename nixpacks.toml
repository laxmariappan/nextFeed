[phases.setup]
nixPkgs = ['php82', 'php82Packages.composer', 'nginx']

[phases.install]
cmds = ['composer install --optimize-autoloader --no-dev']

[phases.build]
cmds = [
    'php artisan route:cache',
    'php artisan view:cache'
]

[start]
cmd = 'php artisan config:clear && echo "Config cleared" && php artisan migrate --force 2>&1 && echo "Migration complete" && echo "Starting PHP server on 0.0.0.0:8000" && echo "Document root: public" && ls -la public/ && php -S 0.0.0.0:8000 -t public'
